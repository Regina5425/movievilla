{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-d817b8d4378ba837.js","node_modules/@parcel/runtime-js/lib/runtime-ae4eaef7f972abe3.js","src/page3/workwithdata.js","node_modules/@parcel/runtime-js/lib/runtime-ca4e37e86e19ff69.js","src/page3/favorite.js","src/page3/film.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"57DdC\\\":\\\"film.d3c72372.js\\\",\\\"i2kbR\\\":\\\"heart_grey.45000755.svg\\\",\\\"h5uxp\\\":\\\"heart_red.d54e7003.svg\\\"}\"));","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"i2kbR\")).toString();","export function getDataFromLocal(str, param) {\r\n        let data = JSON.parse(localStorage.getItem(str));\r\n        if (!data) {\r\n            data = {\r\n                [param]: []\r\n            };\r\n        }\r\n        return data;\r\n}\r\n\r\nexport function setDataToLocal(data, str, param) {\r\n    localStorage.removeItem(str);\r\n    localStorage.setItem(str, JSON.stringify({[param]: data[param]}));\r\n}","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"h5uxp\")).toString();","import heartGrey from \"./img/heart_grey.svg\";\r\nimport heartRed from \"./img/heart_red.svg\";\r\n\r\nimport {getDataFromLocal} from \"./workwithdata\";\r\nimport {setDataToLocal} from \"./workwithdata\";\r\n\r\nclass Favorite {\r\n    constructor(id) {\r\n        this.id = id;\r\n    }\r\n\r\n    render(node) {\r\n        let base = document.createElement('div');\r\n        base.classList.add('heart-circle');\r\n        base.dataset.id = this.id;\r\n\r\n        console.log(this.id);\r\n\r\n        let favorite = document.createElement('img');\r\n        favorite.alt = `heart`;\r\n        favorite.classList.add('heart');\r\n        let toogle = 0;\r\n        let favoritesFilm = getDataFromLocal(\"favorites\", \"films\");\r\n        let arrFavorites = favoritesFilm.films;\r\n        if (arrFavorites.length > 0) {\r\n            if (arrFavorites.includes(this.id)) {\r\n                favorite.src = heartRed;\r\n                toogle++;\r\n            } else {\r\n                favorite.src = heartGrey;\r\n            }\r\n        } else {\r\n                favorite.src = heartGrey;\r\n        }\r\n\r\n        base.addEventListener(\"click\", function(e) {\r\n            let active = e.currentTarget;\r\n            console.log(active);\r\n            let id = active.dataset.id;\r\n            console.log(id);\r\n            \r\n            if (!toogle) {\r\n                favorite.src = heartRed;\r\n                toogle++;\r\n                console.log(id);\r\n                favoritesFilm.films.push(id);\r\n            } else {\r\n                favorite.src = heartGrey;\r\n                toogle--;\r\n                favoritesFilm.films.splice(favoritesFilm.films.indexOf(id), 1);\r\n            }\r\n\r\n            setDataToLocal(favoritesFilm, \"favorites\", \"films\");\r\n\r\n        });\r\n\r\n        base.append(favorite);\r\n        node.append(base);\r\n    }\r\n}\r\n\r\nexport default Favorite;","import heartGrey from \"./img/heart_grey.svg\";\r\nimport heartRed from \"./img/heart_red.svg\";\r\n\r\nimport {getDataFromLocal} from \"./workwithdata\";\r\nimport {setDataToLocal} from \"./workwithdata\";\r\n\r\nimport Favorite from \"./favorite\";\r\n\r\nconst id = localStorage.getItem(\"idFilm\");\r\nconsole.log(id);\r\nconst content = document.querySelector('.content');\r\nconst COUNT_ACTORS = 5;\r\n\r\nclass Film {\r\n    constructor(id) {\r\n        this.id = id;\r\n    }\r\n\r\n    async getInfoFromServer() {\r\n        try {\r\n            let url = 'https://imdb-api.com/en/API/Title/k_pg59pfpp/' + this.id + '/FullActor,FullCast,Posters,Images,Trailer,Ratings,Wikipedia,';\r\n            let response = await fetch(url);\r\n            let data = await response.json();\r\n            console.log('я тут: ', data);\r\n            localStorage.setItem(\"film\", JSON.stringify(data));\r\n            return data;\r\n        } catch (error) {\r\n            console.log(error);\r\n            let errorMsg = document.createElement('p');\r\n            errorMsg.textContent = 'Sorry. Server is not avaliable.';\r\n            errorMsg.classList.add('error');\r\n            content.append(errorMsg);\r\n        }\r\n    }\r\n\r\n    async render() {\r\n        try {\r\n            let film = await this.getInfoFromServer();\r\n\r\n            let fragment = new DocumentFragment();\r\n\r\n            let divImageBlock = document.createElement('div');\r\n            divImageBlock.classList.add('illustration');\r\n\r\n            let image = document.createElement('img');\r\n            image.src = film.image;\r\n            image.alt = film.title;\r\n            image.classList.add('illustration__img');\r\n\r\n            let icon = new Favorite(id);\r\n            icon.render(divImageBlock);\r\n\r\n            // let base = document.createElement('div');\r\n            // base.classList.add('heart-circle');\r\n\r\n            // let favorite = document.createElement('img');\r\n            // favorite.alt = `heart`;\r\n            // favorite.classList.add('heart');\r\n            // let toogle = 0;\r\n            // let favoritesFilm = getDataFromLocal(\"favorites\", \"films\");\r\n            // let arrFavorites = favoritesFilm.films;\r\n            // if (arrFavorites.length > 0) {\r\n            //     if (arrFavorites.includes(id)) {\r\n            //         favorite.src = heartRed;\r\n            //         toogle++;\r\n            //     } else {\r\n            //         favorite.src = heartGrey;\r\n            //     }\r\n            // } else {\r\n            //     favorite.src = heartGrey;\r\n            // }\r\n            \r\n\r\n            // base.addEventListener(\"click\", function() {\r\n            //     if (!toogle) {\r\n            //         favorite.src = heartRed;\r\n            //         toogle++;\r\n            //         favoritesFilm.films.push(id);\r\n            //     } else {\r\n            //         favorite.src = heartGrey;\r\n            //         toogle--;\r\n            //         favoritesFilm.films.splice(favoritesFilm.films.indexOf(id), 1);\r\n            //     }\r\n\r\n            //     setDataToLocal(favoritesFilm, \"favorites\", \"films\");\r\n\r\n            // });\r\n\r\n            let divTextBlock = document.createElement('div');\r\n            divTextBlock.classList.add('about-film');\r\n\r\n            let h2 = document.createElement('h2');\r\n            h2.textContent = film.title;\r\n            h2.classList.add('about-film__title');\r\n\r\n            let genres = document.createElement('p');\r\n            genres.textContent = film.genres;\r\n\r\n            let year = document.createElement('p');\r\n            year.textContent = film.year;\r\n\r\n            let companies = document.createElement('p');\r\n            companies.textContent = film.companies;\r\n\r\n            let rating = document.createElement('p');\r\n            rating.textContent = `IMDb: ${film.imDbRating}`;\r\n\r\n            let plot = document.createElement('p');\r\n            plot.innerHTML = film.wikipedia.plotShort.html;\r\n\r\n            let divActorBlock = document.createElement('div');\r\n            divActorBlock.classList.add('actors-block');\r\n        \r\n            let actors = film.actorList;\r\n\r\n            for (let i = 0; i < COUNT_ACTORS; i++) {\r\n                const element = actors[i];\r\n            \r\n                let figure = document.createElement('figure');\r\n                let imgActor = document.createElement('img');\r\n                imgActor.src = element.image;\r\n                imgActor.alt = element.name;\r\n                imgActor.classList.add('actors-block__img');\r\n                imgActor.width = 200;\r\n                let figcaption = document.createElement('figcaption');\r\n                figcaption.textContent = element.name;\r\n\r\n                divActorBlock.append(figure);\r\n                figure.append(imgActor);\r\n                figure.append(figcaption);\r\n            }\r\n\r\n            fragment.append(divImageBlock);\r\n            divImageBlock.append(image);\r\n            // divImageBlock.append(base);\r\n            \r\n            // base.append(favorite);\r\n\r\n            fragment.append(divTextBlock);\r\n            divTextBlock.append(h2);\r\n            divTextBlock.append(genres);\r\n            divTextBlock.append(year);\r\n            divTextBlock.append(companies);\r\n            divTextBlock.append(rating);\r\n            divTextBlock.append(plot);\r\n            divTextBlock.append(divActorBlock);\r\n\r\n            content.append(fragment);\r\n        } catch (error) {\r\n            console.log(error);\r\n            let errorMsg = document.createElement('p');\r\n            errorMsg.textContent = 'Sorry. JSON is not avaliable.';\r\n            errorMsg.classList.add('error');\r\n            content.append(errorMsg);\r\n        }\r\n    }\r\n}\r\n\r\nlet film = new Film(id);\r\nfilm.render();"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$b3aa9c66c9912952$exports","URL","resolve","import","meta","url","toString","$136249712af828ae$export$5a2e8b942d496a5f","str","param","data","localStorage","getItem","$71c7790b1d1ffe99$exports","$63f75e8f9efe3cfa$export$2e2bcd8739ae039","constructor","this","render","node","base","document","createElement","classList","add","dataset","console","log","favorite","alt","toogle","favoritesFilm","arrFavorites","films","includes","src","$parcel$interopDefault","addEventListener","e","active","currentTarget","splice","indexOf","push","removeItem","setItem","stringify","append","$5ccb58e4f40046e2$var$id","$5ccb58e4f40046e2$var$content","querySelector","async","response","fetch","json","error","errorMsg","textContent","film","getInfoFromServer","fragment","DocumentFragment","divImageBlock","image","title","divTextBlock","h2","genres","year","companies","rating","imDbRating","plot","innerHTML","wikipedia","plotShort","html","divActorBlock","actors","actorList","element","figure","imgActor","name","width","figcaption"],"version":3,"file":"film.d3c72372.js.map"}
function e(e,t,r,i){Object.defineProperty(e,t,{get:r,set:i,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},n={},l=r.parcelRequire8b71;null==l&&((l=function(e){if(e in i)return i[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return i[e]=r,t.call(r.exports,r,r.exports),r.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){n[e]=t},r.parcelRequire8b71=l),l.register("27Lyk",(function(t,r){var i,n;e(t.exports,"register",(()=>i),(e=>i=e)),e(t.exports,"resolve",(()=>n),(e=>n=e));var l={};i=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)l[t[r]]=e[t[r]]},n=function(e){var t=l[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),l("27Lyk").register(JSON.parse('{"fZUyJ":"index.d555a73b.js","6AxYu":"arrow_left.7195b37c.svg","4G2Ec":"arrow_right.9e57fc47.svg","6BSZv":"fakeCard.db88a508.png"}'));var s;s=new URL("../"+l("27Lyk").resolve("6AxYu"),import.meta.url).toString();var a;a=new URL("../"+l("27Lyk").resolve("4G2Ec"),import.meta.url).toString();var o;o=new URL("../"+l("27Lyk").resolve("6BSZv"),import.meta.url).toString();let d=function(e){let t=e.currentTarget.dataset.id;localStorage.setItem("idFilm",t)};var c=class{constructor(e){this.image=e.image,this.year=e.year,this.title=e.title,this.id=e.id}render(e){const t=new DocumentFragment,r=document.createElement("a");r.href="film.html",r.classList.add("slider-arrow__card-link"),r.dataset.id=this.id,r.addEventListener("click",d);const i=document.createElement("div");i.classList.add("slider-arrow__card");const n=document.createElement("img");n.alt="poster",n.src=this.image,n.classList.add("slider-arrow__card-img");const l=document.createElement("div");l.classList.add("slider-arrow__card-text");const s=document.createElement("p");s.classList.add("slider-arrow__card-text__p"),s.textContent=this.year;const a=document.createElement("p");a.classList.add("slider-arrow__card-text__title"),a.textContent=this.title,t.append(r),r.append(i),i.append(n),i.append(l),l.append(a),l.append(s),e.append(t)}};let m=function(e){let t=e.currentTarget;console.log(t);let r=t.className.match(/\d+/)[0];console.log(r);let i=document.querySelector(".slider"+r+"__title").textContent;console.log(i),localStorage.setItem("title",i)};const u={year:"",title:"",id:0,image:t(o)};function f(e){for(;e.firstChild;)e.removeChild(e.firstChild)}const p=document.querySelector(".main");let h={};class _{constructor(e,t,r){this.name=e,this.url=t,this.number=r,this.arr=[]}async getDataFromServer(e,t){try{let r=await fetch(t),i=await r.json();for(const e of i.items)this.arr.push(e);return localStorage.setItem(e,JSON.stringify(this.arr)),i.items}catch(e){console.log(e)}}async getData(e,t){try{let r=JSON.parse(localStorage.getItem(e));return r||(r=await this.getDataFromServer(e,t)),r}catch(e){console.log(e)}}render(){const e=new DocumentFragment,r=document.createElement("section");r.classList.add("section__slider");const i=document.createElement("div");i.classList.add("slider-arrow");const n=document.createElement("h3");n.classList.add("slider-arrow__title",this.number+"__title"),n.textContent=this.name;const l=document.createElement("a");l.href="all.html",l.classList.add("slider-arrow__link","linkall-"+this.number),l.textContent="View all",l.addEventListener("click",m);const o=document.createElement("div");o.classList.add("slider-arrow__block");const d=document.createElement("a");d.href="",d.id=this.number+"-arrow_left",d.classList.add("slider-arrow__left","invisible"),d.addEventListener("click",this.clickArrow);const c=document.createElement("img");c.alt="arrow left",c.src=t(s),c.classList.add("slider-arrow__img");const u=document.createElement("div");u.classList.add("slider-arrow__films",this.number);const f=document.createElement("a");f.href="",f.id=this.number+"-arrow_right",f.classList.add("slider-arrow__right"),f.addEventListener("click",this.clickArrow);const h=document.createElement("img");h.alt="arrow right",h.src=t(a),h.classList.add("slider-arrow__img"),e.append(r),r.append(i),i.append(n),i.append(l),r.append(o),o.append(d),d.append(c),o.append(u),o.append(f),f.append(h),p.append(e)}async renderCards(){try{let e=await this.getData(this.name,this.url),t=[];for(let r=0;r<e.length;r++){const i=e[r];t[r]=new c(i)}h[this.name]=t;const r=document.querySelector("."+this.number);for(let e=0;e<5;e++){t[e].render(r)}}catch(e){console.log(e)}}clickArrow(e){e.preventDefault();let t,r=e.currentTarget,i=0,n=r.id,l=n.match(/\d+/)[0];if(i=document.querySelector(".slider"+l+"__title").textContent,n.match("right")){if(y=r,y.className.match("invisible"))return;if(h["slider"+l]++,v=document.querySelector("#slider"+l+"-arrow_left"),v.classList.remove("invisible"),f(document.querySelector(".slider"+l)),t=h[i],1===h["slider"+l])for(let e=4;e<9;e++){t[e].render(document.querySelector(".slider"+l))}if(2===h["slider"+l])for(let e=8;e<13;e++){t[e].render(document.querySelector(".slider"+l))}if(3===h["slider"+l]){for(let e=12;e<16;e++){t[e].render(document.querySelector(".slider"+l))}new c(u).render(document.querySelector(".slider"+l));let e=document.querySelector('a[id="0"]');e.removeEventListener("click",d),e.href="all.html",e.classList.add("linkall-"+l),console.log(e),console.log(e.href),e.addEventListener("click",m),y.classList.add("invisible")}}if(n.match("left")){if(v=r,v.className.match("invisible"))return;if(h["slider"+l]--,y=document.querySelector("#slider"+l+"-arrow_right"),y.classList.remove("invisible"),f(document.querySelector(".slider"+l)),t=h[i],2===h["slider"+l])for(let e=8;e<13;e++){t[e].render(document.querySelector(".slider"+l))}if(1===h["slider"+l])for(let e=4;e<9;e++){t[e].render(document.querySelector(".slider"+l))}if(0===h["slider"+l]){for(let e=0;e<5;e++){t[e].render(document.querySelector(".slider"+l))}v.classList.add("invisible")}}}}let g=new _("Top 250 Movies","https://imdb-api.com/en/API/Top250Movies/k_o0135nnp","slider1");g.render(),g.renderCards(),h.slider1=0;let w=new _("Top250TVs","https://imdb-api.com/en/API/Top250TVs/k_o0135nnp","slider2");w.render(),w.renderCards(),h.slider2=0;let v=document.querySelector(".slider-arrow__left"),y=document.querySelector(".slider-arrow__right");
//# sourceMappingURL=index.d555a73b.js.map

function e(e,t,r,a){Object.defineProperty(e,t,{get:r,set:a,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},l=r.parcelRequire8b71;null==l&&((l=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return a[e]=r,t.call(r.exports,r,r.exports),r.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){n[e]=t},r.parcelRequire8b71=l),l.register("27Lyk",(function(t,r){var a,n;e(t.exports,"register",(()=>a),(e=>a=e)),e(t.exports,"resolve",(()=>n),(e=>n=e));var l={};a=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)l[t[r]]=e[t[r]]},n=function(e){var t=l[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),l("27Lyk").register(JSON.parse('{"bU1WO":"lk.47982376.js","i2kbR":"heart_grey.45000755.svg","h5uxp":"heart_red.d54e7003.svg"}'));let s=function(e){let t=e.currentTarget.dataset.id;localStorage.setItem("idFilm",t)};var i=class{constructor(e){this.image=e.image,this.year=e.year,this.title=e.title,this.id=e.id}render(e){const t=new DocumentFragment,r=document.createElement("a");r.href="film.html",r.classList.add("slider-arrow__card-link"),r.dataset.id=this.id,r.addEventListener("click",s);const a=document.createElement("div");a.classList.add("slider-arrow__card");const n=document.createElement("img");n.alt="poster",n.src=this.image,n.classList.add("slider-arrow__card-img");const l=document.createElement("div");l.classList.add("slider-arrow__card-text");const i=document.createElement("p");i.classList.add("slider-arrow__card-text__p"),i.textContent=this.year;const o=document.createElement("p");o.classList.add("slider-arrow__card-text__title"),o.textContent=this.title,t.append(r),r.append(a),a.append(n),a.append(l),l.append(o),l.append(i),e.append(t)}};function o(e,t){let r=JSON.parse(localStorage.getItem(e));return r||(r={[t]:[]}),r}var d;d=new URL("../"+l("27Lyk").resolve("i2kbR"),import.meta.url).toString();var c;c=new URL("../"+l("27Lyk").resolve("h5uxp"),import.meta.url).toString();var u=class{constructor(e){this.id=e}render(e){let r=document.createElement("div");r.classList.add("heart-circle"),r.dataset.id=this.id,console.log(this.id);let a=document.createElement("img");a.alt="heart",a.classList.add("heart");let n=0,l=o("favorites","films"),s=l.films;s.length>0&&s.includes(this.id)?(a.src=t(c),n++):a.src=t(d),r.addEventListener("click",(function(e){let r=e.currentTarget;console.log(r);let s=r.dataset.id;var i,o,u;console.log(s),n?(a.src=t(d),n--,l.films.splice(l.films.indexOf(s),1)):(a.src=t(c),n++,console.log(s),l.films.push(s)),i=l,o="favorites",u="films",localStorage.removeItem(o),localStorage.setItem(o,JSON.stringify({[u]:i[u]}))})),r.append(a),e.append(r)}};const m=document.querySelector(".favorites-block");let p=o("favorites","films").films;if(p.length>0){let e=[];(async t=>{try{for(let r=0;r<t.length;r++){const a=await f(t[r]);if(!a.id)throw new Error("Sorry. API_KEY spoiled.");e[r]=new i(a),e[r].render(m);let n=new u(a.id),l=document.querySelectorAll(".slider-arrow__card");console.log(l),n.render(l[r])}}catch(e){console.log(e);let t=document.createElement("p");t.textContent=e.message,t.classList.add("error"),m.append(t)}})(p)}else{let e=document.createElement("div");e.classList.add("error"),e.textContent="Избранных фильмов нет :( ",m.append(e)}async function f(e){try{let t="https://imdb-api.com/en/API/Title/k_9lry5v7x/"+e+"/FullActor,FullCast,Posters,Images,Trailer,Ratings,Wikipedia,",r=await fetch(t);return await r.json()}catch(e){console.log(e);let t=document.createElement("p");t.textContent="Sorry. Server is not avaliable.",t.classList.add("error"),m.append(t)}}
//# sourceMappingURL=lk.47982376.js.map

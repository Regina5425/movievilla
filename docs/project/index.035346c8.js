function e(e,t,r,s){Object.defineProperty(e,t,{get:r,set:s,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},n={},o=r.parcelRequire8b71;null==o&&((o=function(e){if(e in s)return s[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return s[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},r.parcelRequire8b71=o),o.register("27Lyk",(function(t,r){var s,n;e(t.exports,"register",(()=>s),(e=>s=e)),e(t.exports,"resolve",(()=>n),(e=>n=e));var o={};s=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)o[t[r]]=e[t[r]]},n=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),o("27Lyk").register(JSON.parse('{"6ysTD":"index.035346c8.js","98GFL":"oops-err.5cfb3e47.png","1RHOg":"arrow_left.7195b37c.svg","hkPYB":"arrow_right.9e57fc47.svg","4FcmU":"fakeCard.db88a508.png"}'));new URL("../"+o("27Lyk").resolve("98GFL"),import.meta.url).toString();var a=function(){const e=document.querySelector(".link-subscribe"),t=document.querySelector(".modal-subs"),r=document.querySelector('[data-subs="close"]'),s=document.querySelector(".modal-subs__form"),n=document.querySelector(".modal-subs__mail");function o(){t.classList.add("modal-subs__show"),t.classList.remove("modal-subs__hide"),document.body.style.overflow="hidden"}function a(){t.classList.add("modal-subs__hide"),t.classList.remove("modal-subs__show"),document.body.style.overflow=""}const l="Thank you for subscribing!",c="Something went wrong...";function i(e){const t=document.querySelector(".modal-subs-wrapper");o();const r=document.createElement("div");r.innerHTML=`\n\t\t\t\t<div class="modal-subs-content">\n\t\t\t\t\t<div data-subs="close" class="modal-subs__close">&times;</div>\n\t\t\t\t\t<div class="modal-subs__title">${e}</div>\n\t\t\t\t</div>\n\t\t\t`,t.append(r),t.addEventListener("click",(()=>{r.remove()}))}e.addEventListener("click",o),r.addEventListener("click",a),t.addEventListener("click",(e=>{e.target===t&&a()})),s.addEventListener("submit",(e=>{e.preventDefault();const t={email:n.value};n.validity.typeMismatch||""===n.value?function(e){const t=document.createElement("p");t.classList.add("modal-subs__error"),t.textContent="*Invalid filling format",s.append(t),e.addEventListener("input",(()=>{t.remove()}))}(n):async function(){try{const e=await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}),r=await e.json();console.log(r),i(l)}catch{throw i(c),new Error("Error sending the subscription form!")}finally{s.reset()}}()}))};var l=function(){const e=document.querySelectorAll(".main-slider__slide");async function t(t,r,s){try{const n=await fetch(`https://imdb-api.com/en/API/Images/k_4wflfh9z/${t}/Short`),o=await n.json(),a=o.items[r].image,l=o.items[r].title,c=document.createElement("img");c.src=a,c.alt=l,e[s].append(c)}catch(e){e.innerHtml='\n\t\t\t\t<div class="slide-error">\n\t\t\t\t\t<img src="../img/oops-err.png" alt="">\n\t\t\t\t</div>\n\t\t\t'}}t("tt0468569",12,0),t("tt0120737",36,1),t("tt4123432",4,2),t("tt1160419",1,3)};var c=function(){const e=document.querySelector(".main-slider"),t=document.querySelectorAll(".main-slider__slide");let r=1;function s(e){e>t.length&&(r=1),e<1&&(r=t.length),t.forEach((e=>{e.style.display="none"})),t[r-1].style.display="block",t[r-1].classList.add("fade")}s(r);const n=document.createElement("ol"),o=[];n.classList.add("slider-dots"),e.append(n);for(let e=0;e<t.length;e++){const t=document.createElement("li");t.classList.add("slider-dots__dot"),t.setAttribute("data-slide-index",e+1),0==e&&t.classList.add("slider-dots__dot--active"),n.append(t),o.push(t)}setInterval((()=>{s(r+=1),o.forEach((e=>{e.classList.remove("slider-dots__dot--active")})),o[r-1].classList.add("slider-dots__dot--active")}),4e3)};var i,d=function(){const e=document.querySelector(".search-form"),t=document.querySelector(".search__input"),r=document.querySelector(".search-modal"),s=document.querySelector(".search-modal__wrapper");function n(){r.classList.remove("search-modal__hide"),r.classList.add("search-modal__show","fade")}function o(e,t,r){const n=document.createElement("ul");n.classList.add("search-modal__content"),s.append(n);const o=document.createElement("li");n.append(o);const a=document.createElement("a");a.setAttribute("href","film.html"),a.classList.add("search-modal-film"),o.append(a);const l=document.createElement("img");l.classList.add("search-modal-film__img"),l.src=e,l.alt=t,a.prepend(l);const c=document.createElement("h3");c.classList.add("search-modal-film__title"),c.textContent=r,a.append(c)}function a(e){const t=JSON.stringify(e);localStorage.setItem("popular",t)}async function l(e){try{const t=await fetch("https://imdb-api.com/en/API/MostPopularMovies/k_my3q9ejq"),r=await t.json();for(let e=0;e<1;e++)a(r);const s=r.items[e].image,n=r.items[e].id;o(s,n,r.items[e].title)}catch(e){e.innerHTML='\n\t\t\t\t<div class="search-modal-film__error">Failed to download movies</div>\n\t\t\t'}}const c=document.createElement("h2");c.classList.add("search-modal__title"),c.textContent="Popular movies",s.prepend(c);for(let e=0;e<5;e++)l(e);e.addEventListener("submit",(r=>{r.preventDefault(),c.remove(),document.querySelectorAll(".search-modal__content").forEach((e=>{e&&e.remove()})),async function(r){try{const s=t.value.trim();console.log(s);const a=await fetch(`https://imdb-api.com/en/API/SearchMovie/k_my3q9ejq/${s}`),l=await a.json(),c=l.results[r].image,i=l.results[r].id,d=l.results[r].title;n(),o(c,i,d)}catch(e){e.innerHTML='\n\t\t\t<div class="search-modal-film__error">Not found</div>\n\t\t'}finally{e.reset()}}(0)})),t.addEventListener("focus",n),r.addEventListener("click",(function(){r.classList.remove("search-modal__show"),r.classList.add("search-modal__hide")}))};i=new URL("../"+o("27Lyk").resolve("1RHOg"),import.meta.url).toString();var m;m=new URL("../"+o("27Lyk").resolve("hkPYB"),import.meta.url).toString();var u;u=new URL("../"+o("27Lyk").resolve("4FcmU"),import.meta.url).toString();let p=function(e){let t=e.currentTarget.dataset.id;localStorage.setItem("idFilm",t)};var f=class{constructor(e){this.image=e.image,this.year=e.year,this.title=e.title,this.id=e.id}render(e){const t=new DocumentFragment,r=document.createElement("a");r.href="film.html",r.classList.add("slider-arrow__card-link"),r.dataset.id=this.id,r.addEventListener("click",p);const s=document.createElement("div");s.classList.add("slider-arrow__card");const n=document.createElement("img");n.alt="poster",n.src=this.image,n.classList.add("slider-arrow__card-img");const o=document.createElement("div");o.classList.add("slider-arrow__card-text");const a=document.createElement("p");a.classList.add("slider-arrow__card-text__p"),a.textContent=this.year;const l=document.createElement("p");l.classList.add("slider-arrow__card-text__title"),l.textContent=this.title,t.append(r),r.append(s),s.append(n),s.append(o),o.append(l),o.append(a),e.append(t)}};let v=function(e){let t=e.currentTarget;console.log(t);let r=t.className.match(/\d+/)[0];console.log(r);let s=document.querySelector(".slider"+r+"__title").textContent;console.log(s),localStorage.setItem("title",s)};const h=document.querySelector(".modal"),_=document.querySelector(".reg"),L=document.querySelector(".open-modal"),g=document.querySelectorAll(".form_btn"),y=document.querySelector(".signin-btn"),w=document.querySelector(".signup-btn"),S=document.querySelector(".form-box"),E=document.querySelector(".reg");let b=document.querySelector(".close-modal");L.addEventListener("click",(e=>{e.preventDefault(),h.classList.add("active"),_.classList.add("active")})),b.addEventListener("click",(()=>{h.classList.remove("active"),_.classList.remove("active")})),g.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),h.classList.remove("active"),_.classList.remove("active")}))})),document.addEventListener("DOMContentLoaded",(function(e){let t=localStorage.getItem("name");null!==t&&(document.querySelector(".username").value=t)})),document.addEventListener("DOMContentLoaded",(function(e){let t=localStorage.getItem(".password");null!==t&&(document.querySelector(".password").value=t)})),document.addEventListener("click",(e=>{e.target===h&&(h.classList.remove("active"),_.classList.remove("active"))})),w.addEventListener("click",(function(){S.classList.add("active"),E.classList.add("active")})),y.addEventListener("click",(function(){S.classList.remove("active"),E.classList.remove("active")}));const q=document.querySelectorAll(".form");let k=document.querySelector(".error"),C="";function x(e,t){if(document.querySelector(e).value.length>1){let e=document.querySelector(".password").value,t=document.querySelector(".username").value;null==localStorage.getItem("name")&&localStorage.setItem("name",t),null==localStorage.getItem("password")&&localStorage.setItem("password",e)}else C+=`Fill the field ${t} <br>`}q.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),x('input[name="user"]',"Логин"),x('input[name="password"]',"Пароль"),k.innerHTML=C}))})),document.addEventListener("DOMContentLoaded",(()=>{a()})),document.addEventListener("DOMContentLoaded",(()=>{l(),c()})),document.addEventListener("DOMContentLoaded",(()=>{d()}));const I={year:"",title:"",id:0,image:t(u)};function A(e){for(;e.firstChild;)e.removeChild(e.firstChild)}const T=document.querySelector(".main");let D={};class F{constructor(e,t,r){this.name=e,this.url=t,this.number=r,this.arr=[]}async getDataFromServer(e,t){try{let r=await fetch(t),s=await r.json();for(const e of s.items)this.arr.push(e);return localStorage.setItem(e,JSON.stringify(this.arr)),s.items}catch(e){console.log(e);let t=document.createElement("p");t.textContent="Sorry. API_KEY spoiled.",t.classList.add("error"),T.append(t)}}async getData(e,t){try{let r=JSON.parse(localStorage.getItem(e));return r||(r=await this.getDataFromServer(e,t)),r}catch(e){console.log(e);let t=document.createElement("p");t.textContent="Sorry. API_KEY spoiled.",t.classList.add("error"),T.append(t)}}render(){const e=new DocumentFragment,r=document.createElement("section");r.classList.add("section__slider");const s=document.createElement("div");s.classList.add("slider-arrow");const n=document.createElement("h3");n.classList.add("slider-arrow__title",this.number+"__title"),n.textContent=this.name;const o=document.createElement("a");o.href="all.html",o.classList.add("slider-arrow__link","linkall-"+this.number),o.textContent="View all",o.addEventListener("click",v);const a=document.createElement("div");a.classList.add("slider-arrow__block");const l=document.createElement("a");l.href="",l.id=this.number+"-arrow_left",l.classList.add("slider-arrow__left","invisible"),l.addEventListener("click",this.clickArrow);const c=document.createElement("img");c.alt="arrow left",c.src=t(i),c.classList.add("slider-arrow__img");const d=document.createElement("div");d.classList.add("slider-arrow__films",this.number);const u=document.createElement("a");u.href="",u.id=this.number+"-arrow_right",u.classList.add("slider-arrow__right"),u.addEventListener("click",this.clickArrow);const p=document.createElement("img");p.alt="arrow right",p.src=t(m),p.classList.add("slider-arrow__img"),e.append(r),r.append(s),s.append(n),s.append(o),r.append(a),a.append(l),l.append(c),a.append(d),a.append(u),u.append(p),T.append(e)}async renderCards(){try{let e=await this.getData(this.name,this.url),t=[];for(let r=0;r<e.length;r++){const s=e[r];t[r]=new f(s)}D[this.name]=t;const r=document.querySelector("."+this.number);for(let e=0;e<5;e++){t[e].render(r)}}catch(e){console.log(e)}}clickArrow(e){e.preventDefault();let t,r=e.currentTarget,s=0,n=r.id,o=n.match(/\d+/)[0];if(s=document.querySelector(".slider"+o+"__title").textContent,n.match("right")){if(R=r,R.className.match("invisible"))return;if(D["slider"+o]++,P=document.querySelector("#slider"+o+"-arrow_left"),P.classList.remove("invisible"),A(document.querySelector(".slider"+o)),t=D[s],1===D["slider"+o])for(let e=4;e<9;e++){t[e].render(document.querySelector(".slider"+o))}if(2===D["slider"+o])for(let e=8;e<13;e++){t[e].render(document.querySelector(".slider"+o))}if(3===D["slider"+o]){for(let e=12;e<16;e++){t[e].render(document.querySelector(".slider"+o))}new f(I).render(document.querySelector(".slider"+o));let e=document.querySelector('a[data-id="0"]');e.removeEventListener("click",p),e.href="all.html",e.classList.add("linkall-"+o),e.addEventListener("click",v),R.classList.add("invisible")}}if(n.match("left")){if(P=r,P.className.match("invisible"))return;if(D["slider"+o]--,R=document.querySelector("#slider"+o+"-arrow_right"),R.classList.remove("invisible"),A(document.querySelector(".slider"+o)),t=D[s],2===D["slider"+o])for(let e=8;e<13;e++){t[e].render(document.querySelector(".slider"+o))}if(1===D["slider"+o])for(let e=4;e<9;e++){t[e].render(document.querySelector(".slider"+o))}if(0===D["slider"+o]){for(let e=0;e<5;e++){t[e].render(document.querySelector(".slider"+o))}P.classList.add("invisible")}}}}let O=new F("Top 250 Movies","https://imdb-api.com/en/API/Top250Movies/k_pg59pfpp","slider1");O.render(),O.renderCards(),D.slider1=0;let H=new F("Top250TVs","https://imdb-api.com/en/API/Top250TVs/k_pg59pfpp","slider2");H.render(),H.renderCards(),D.slider2=0;let M=new F("InTheaters","https://imdb-api.com/en/API/InTheaters/k_pg59pfpp","slider3");M.render(),M.renderCards(),D.slider3=0;let P=document.querySelector(".slider-arrow__left"),R=document.querySelector(".slider-arrow__right");
//# sourceMappingURL=index.035346c8.js.map

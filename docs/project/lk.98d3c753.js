function e(e,t,r,a){Object.defineProperty(e,t,{get:r,set:a,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},l=r.parcelRequire8b71;null==l&&((l=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return a[e]=r,t.call(r.exports,r,r.exports),r.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){n[e]=t},r.parcelRequire8b71=l),l.register("27Lyk",(function(t,r){var a,n;e(t.exports,"register",(()=>a),(e=>a=e)),e(t.exports,"resolve",(()=>n),(e=>n=e));var l={};a=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)l[t[r]]=e[t[r]]},n=function(e){var t=l[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),l("27Lyk").register(JSON.parse('{"lVwoi":"lk.98d3c753.js","3nwA2":"heart_grey.45000755.svg","5dbCN":"heart_red.d54e7003.svg","98GFL":"oops-err.5cfb3e47.png"}'));let o=function(e){let t=e.currentTarget.dataset.id;localStorage.setItem("idFilm",t)};var s=class{constructor(e){this.image=e.image,this.year=e.year,this.title=e.title,this.id=e.id}render(e){const t=new DocumentFragment,r=document.createElement("a");r.href="film.html",r.classList.add("slider-arrow__card-link"),r.dataset.id=this.id,r.addEventListener("click",o);const a=document.createElement("div");a.classList.add("slider-arrow__card");const n=document.createElement("img");n.alt="poster",n.src=this.image,n.classList.add("slider-arrow__card-img");const l=document.createElement("div");l.classList.add("slider-arrow__card-text");const s=document.createElement("p");s.classList.add("slider-arrow__card-text__p"),s.textContent=this.year;const i=document.createElement("p");i.classList.add("slider-arrow__card-text__title"),i.textContent=this.title,t.append(r),r.append(a),a.append(n),a.append(l),l.append(i),l.append(s),e.append(t)}};function i(e,t){let r=JSON.parse(localStorage.getItem(e));return r||(r={[t]:[]}),r}var d;d=new URL("../"+l("27Lyk").resolve("3nwA2"),import.meta.url).toString();var c;c=new URL("../"+l("27Lyk").resolve("5dbCN"),import.meta.url).toString();var m,p=class{constructor(e){this.id=e}render(e){let r=document.createElement("div");r.classList.add("heart-circle"),r.dataset.id=this.id,console.log(this.id);let a=document.createElement("img");a.alt="heart",a.classList.add("heart");let n=0,l=i("favorites","films"),o=l.films;o.length>0&&o.includes(this.id)?(a.src=t(c),n++):a.src=t(d),r.addEventListener("click",(function(e){let r=e.currentTarget;console.log(r);let o=r.dataset.id;var s,i,m;console.log(o),n?(a.src=t(d),n--,l.films.splice(l.films.indexOf(o),1)):(a.src=t(c),n++,console.log(o),l.films.push(o)),s=l,i="favorites",m="films",localStorage.removeItem(i),localStorage.setItem(i,JSON.stringify({[m]:s[m]}))})),r.append(a),e.append(r)}};m=new URL("../"+l("27Lyk").resolve("98GFL"),import.meta.url).toString();const u=document.querySelector(".favorites-block");let f=i("favorites","films").films;if(f.length>0){let e=[];(async r=>{try{for(let t=0;t<r.length;t++){const a=await g(r[t]);if(!a.id)throw new Error("Sorry. API_KEY spoiled.");e[t]=new s(a),e[t].render(u);let n=new p(a.id),l=document.querySelectorAll(".slider-arrow__card");n.render(l[t])}}catch(e){console.log(e);let r=document.createElement("img");r.classList.add("error"),r.alt="error page",r.src=t(m),u.append(r);let a=document.createElement("p");a.textContent="Sorry. API_KEY spoiled.",a.classList.add("error"),u.append(a)}})(f)}else{let e=document.createElement("div");e.classList.add("error"),e.textContent="Избранных фильмов нет :( ",u.append(e)}async function g(e){try{let t="https://imdb-api.com/en/API/Title/k_o0135nnp/"+e+"/FullActor,FullCast,Posters,Images,Trailer,Ratings,Wikipedia,",r=await fetch(t);return await r.json()}catch(e){console.log(e);let t=document.createElement("p");t.textContent="Sorry. Server is not avaliable.",t.classList.add("error"),u.append(t)}}
//# sourceMappingURL=lk.98d3c753.js.map

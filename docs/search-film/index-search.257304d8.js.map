{"mappings":"MAAA,WAEC,MAAMA,EAAOC,SAASC,cAAc,gBACnCC,EAAcF,SAASC,cAAc,kBACrCE,EAAcH,SAASC,cAAc,iBACrCG,EAAgBJ,SAASC,cAAc,0BAExC,SAASI,IACRF,EAAYG,UAAUC,OAAO,sBAC7BJ,EAAYG,UAAUE,IAAI,qBAAsB,O,CAWjD,SAASC,EAAYC,EAAKC,EAAIC,GAC7B,MAAMC,EAAeb,SAASc,cAAc,MAC5CD,EAAaP,UAAUE,IAAI,yBAC3BJ,EAAcW,OAAOF,GAErB,MAAMG,EAAYhB,SAASc,cAAc,MACzCD,EAAaE,OAAOC,GAEpB,MAAMC,EAAOjB,SAASc,cAAc,KACpCG,EAAKC,aAAa,OAAQ,aAC1BD,EAAKX,UAAUE,IAAI,qBACnBQ,EAAUD,OAAOE,GAEjB,MAAME,EAAUnB,SAASc,cAAc,OACvCK,EAAQb,UAAUE,IAAI,0BACtBW,EAAQC,IAAMV,EACdS,EAAQE,IAAMV,EACdM,EAAKK,QAAQH,GAEb,MAAMI,EAAYvB,SAASc,cAAc,MACzCS,EAAUjB,UAAUE,IAAI,4BACxBe,EAAUC,YAAcZ,EACxBK,EAAKF,OAAOQ,E;;SAqCZE,EAAaC,GACb,MAAAC,EAAAC,KAAAC,UAAAH,GAEDI,aAAAC,QAAA,UAAAJ,EACA;;eAEQK,EAAiBC,G,IAGvB,MAAKC,QAAmBC,MACvB,4DAGKT,QAAaQ,EAAQE,OAC3B,QAAMC,EAAA,EAASA,EAAG,EAAAA,IAAQZ,EAAMC,GAChC,MAAMY,EAAYZ,EAAGa,MAAQN,GAAWO,MAExCC,EAAYf,EAAYa,MAAAN,GAAWtB,GAEnCF,EAAI6B,EAAaG,EADJf,EAAAa,MAAAN,GAAArB,MASf,CALE,MAAA8B,GACDA,EAAAC,UAAA,2FAID,CACA;wCAEA;MAAAC,EAAgB5C,SAAAc,cAAA,MAChB8B,EAAiBtC,UAChBE,IAAA,uBAGDoC,EAAKpB,YAA2B,oB,EAC7BF,QAAgBsB;;IAElB,IAAAP,EAAA,EAAWA,EAAG,EAAAA,IAAAL,EAAAK,G,EACdQ,iBAAc,UAAAC,IACZA,EAAAC,iBAEHH,EAAYrC,SAlDJP,SAASgD,iBAAA,0BAEbC,SAAAhC,IACHA,KAAAV,QAAA,IA7BD2C,eAA0BjB,GACzB,IACC,MAAMkB,EAAajD,EAAYkD,MAAMC,OACrCC,QAAQC,IAAIJ,GACZ,MAAMjB,QAAiBC,MAAM,sDAA+DgB,KACtFK,QAAiBtB,EAASE,OAE1BqB,EAAkBD,EAASE,QAAQzB,GAAOO,MAC1CmB,EAAiBH,EAASE,QAAQzB,GAAOtB,GACzCiD,EAAoBJ,EAASE,QAAQzB,GAAOrB,MAElDP,IACAI,EAAYgD,EAAiBE,EAAgBC,EAU/C,CATG,MAAOlB,GACRA,EAAIC,UAAY,2E,CAKhB,QACD5C,EAAA8D,OAED,C,CAwDAC,CAAA,M;4BA/GA,WACC3D,EAAYG,UAAUC,OAAO,sBAC7BJ,EAAYG,UAAUE,IAAI,qB,KCZ5BR,SAAS6C,iBAAiB,oBAAoB,KAC7CkB,GAAiB","sources":["src/search-film/js-search/search-modal.js","src/search-film/index-search.js"],"sourcesContent":["function searchFilmsForm() {\r\n\t//все найденные элементы заменить на классы в форме поиска главной страницы\r\n\tconst form = document.querySelector('.search-form'),\r\n\t\tsearchInput = document.querySelector('.search__input'),\r\n\t\tsearchModal = document.querySelector('.search-modal'),\r\n\t\tsearchWrapper = document.querySelector('.search-modal__wrapper');\r\n\r\n\tfunction openSearchModal() {\r\n\t\tsearchModal.classList.remove('search-modal__hide');\r\n\t\tsearchModal.classList.add('search-modal__show', 'fade');\r\n\t}\r\n\r\n\tfunction closeSearchModal() {\r\n\t\tsearchModal.classList.remove('search-modal__show');\r\n\t\tsearchModal.classList.add('search-modal__hide');\r\n\t}\r\n\r\n\t// const API_KEY_REGINA = 'k_d8sb2mok';\r\n\tconst API_KEY_REGINA_1 = 'k_my3q9ejq';\r\n\r\n\tfunction createFilms(img, id, title) {\r\n\t\tconst filmsContent = document.createElement('ul');\r\n\t\tfilmsContent.classList.add('search-modal__content');\r\n\t\tsearchWrapper.append(filmsContent);\r\n\r\n\t\tconst filmsList = document.createElement('li');\r\n\t\tfilmsContent.append(filmsList);\r\n\r\n\t\tconst film = document.createElement('a');\r\n\t\tfilm.setAttribute('href', 'film.html');\r\n\t\tfilm.classList.add('search-modal-film');\r\n\t\tfilmsList.append(film);\r\n\r\n\t\tconst filmImg = document.createElement('img');\r\n\t\tfilmImg.classList.add('search-modal-film__img');\r\n\t\tfilmImg.src = img;\r\n\t\tfilmImg.alt = id;\r\n\t\tfilm.prepend(filmImg);\r\n\r\n\t\tconst filmTitle = document.createElement('h3');\r\n\t\tfilmTitle.classList.add('search-modal-film__title');\r\n\t\tfilmTitle.textContent = title;\r\n\t\tfilm.append(filmTitle);\r\n\t}\r\n\r\n\tasync function searchFilm(index) {\r\n\t\ttry {\r\n\t\t\tconst userSearch = searchInput.value.trim();\r\n\t\t\tconsole.log(userSearch);\r\n\t\t\tconst response = await fetch(`https://imdb-api.com/en/API/SearchMovie/${API_KEY_REGINA_1}/${userSearch}`);\r\n\t\t\tconst searched = await response.json();\r\n\r\n\t\t\tconst searchedFilmImg = searched.results[index].image;\r\n\t\t\tconst searchedFilmId = searched.results[index].id;\r\n\t\t\tconst searchedFilmTitle = searched.results[index].title;\r\n\r\n\t\t\topenSearchModal();\r\n\t\t\tcreateFilms(searchedFilmImg, searchedFilmId, searchedFilmTitle);\r\n\t\t} catch (err) {\r\n\t\t\terr.innerHTML = `\r\n\t\t\t<div class=\"search-modal-film__error\">Фильм не найден</div>\r\n\t\t`;\r\n\t\t} finally {\r\n\t\t\tform.reset();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction clearResult() {\r\n\t\tconst filmContent = document.querySelectorAll('.search-modal__content');\r\n\t\tfilmContent.forEach(film => { //! исправления\r\n\t\t\tif (film) {\r\n\t\t\t\tfilm.remove();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//!сохраняем поп фильмы в localStorage\r\n\tfunction saveFilms(popular) {\r\n\t\tconst popFilms = JSON.stringify(popular);\r\n\t\tlocalStorage.setItem('popular', popFilms);\r\n\t}\r\n\r\n\t//!функция показывает популярные фильмы\r\n\tasync function showPopularFilms(index) {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(`https://imdb-api.com/en/API/MostPopularMovies/${API_KEY_REGINA_1}`);\r\n\t\t\tconst popular = await response.json();\r\n\r\n\t\t\tfor (let i = 0; i < 1; i++) {\r\n\t\t\t\tsaveFilms(popular);\r\n\t\t\t}\r\n\r\n\t\t\tconst filmGetImg = popular.items[index].image;\r\n\t\t\tconst filmGetId = popular.items[index].id;\r\n\t\t\tconst filmGetTitle = popular.items[index].title;\r\n\r\n\t\t\tcreateFilms(filmGetImg, filmGetId, filmGetTitle);\r\n\t\t} catch (err) {\r\n\t\t\terr.innerHTML = `\r\n\t\t\t\t<div class=\"search-modal-film__error\">Не удалось загрузить фильмы</div>\r\n\t\t\t`;\r\n\t\t}\r\n\t}\r\n\r\n\t//!создание заголовка популярных фильмов\r\n\tconst popularFilmsTitle = document.createElement('h2');\r\n\tpopularFilmsTitle.classList.add('search-modal__title');\r\n\tpopularFilmsTitle.textContent = 'Популярные фильмы';\r\n\tsearchWrapper.prepend(popularFilmsTitle);\r\n\t//!вызов функции\r\n\tfor (let i = 0; i < 5; i++) {\r\n\t\tshowPopularFilms(i);\r\n\t}\r\n\r\n\tform.addEventListener('submit', (e) => {\r\n\t\te.preventDefault();\r\n\t\tpopularFilmsTitle.remove(); //!исправления\r\n\t\tclearResult();\r\n\t\tsearchFilm(0);\r\n\t});\r\n\r\n\tsearchInput.addEventListener('focus', openSearchModal); //!исправления\r\n\tsearchModal.addEventListener('click', closeSearchModal);\r\n}\r\n\r\nexport default searchFilmsForm;","import searchFilmsForm from \"./js-search/search-modal\";\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\tsearchFilmsForm();\r\n});"],"names":["form","document","querySelector","searchInput","searchModal","searchWrapper","openSearchModal","classList","remove","add","createFilms","img","id","title","filmsContent","createElement","append","filmsList","film","setAttribute","filmImg","src","alt","prepend","filmTitle","textContent","saveFilms","popular","popFilms","JSON","stringify","localStorage","setItem","showPopularFilms","index","response","fetch","json","i","filmGetImg","items","image","filmGetId","err","innerHTML","popularFilmsTitle","addEventListener","e","preventDefault","querySelectorAll","forEach","async","userSearch","value","trim","console","log","searched","searchedFilmImg","results","searchedFilmId","searchedFilmTitle","reset","searchFilm","$8260c1fa1b9e9f57$export$2e2bcd8739ae039"],"version":3,"file":"index-search.257304d8.js.map"}
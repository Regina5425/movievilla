{"mappings":"MAAA,WAEC,MAAMA,EAAeC,SAASC,cAAc,aAC3CC,EAAYF,SAASC,cAAc,eACnCE,EAAiBH,SAASC,cAAc,uBACxCG,EAAgBJ,SAASC,cAAc,qBACvCI,EAAiBL,SAASC,cAAc,qBAEzC,SAASK,IACRJ,EAAUK,UAAUC,IAAI,oBACxBN,EAAUK,UAAUE,OAAO,oBAC3BT,SAASU,KAAKC,MAAMC,SAAW,Q,CAGhC,SAASC,IACRX,EAAUK,UAAUC,IAAI,oBACxBN,EAAUK,UAAUE,OAAO,oBAC3BT,SAASU,KAAKC,MAAMC,SAAW,E,CAehC,MAAME,EACI,uBADJA,EAEI,yBAGV,SAASC,EAAqBD,GAC7B,MAAME,EAAmBhB,SAASC,cAAc,uBAEhDK,IAEA,MAAMW,EAAmBjB,SAASkB,cAAc,OAChDD,EAAiBE,UAAY,kKASFL,kCAI5BE,EAAaI,OAAAH,GACbD,EAAeK,iBAAiB,SAAS,KACzCJ,EAAUR,QAAiB,G,CAM3BV,EAAOsB,iBAAA,QAAAf,GACPH,EAAYkB,iBAAA,QAAAR,GAEZX,EAAAmB,iBAAc,SAAiBC,IAC9BA,EAAMC,SAAcrB,GAAGW,GAAA,I,EAMrBQ,iBAAA,UAAAC,IAEFA,EAAAE,iB,QAEQ,C,MADHnB,EAAAoB,O,sCAzDN,SAA8BC,GAC7B,MAAMC,EAAoB3B,SAASkB,cAAc,KACjDS,EAAkBpB,UAAUC,IAAI,qBAChCmB,EAAkBC,YAAc,8BAChCxB,EAAcgB,OAAOO,GAErBD,EAAML,iBAAiB,SAAS,KAC/BM,EAAkBlB,QAAQ,G,gCAwDxBoB,QAAWC,MAVb,6CAUgC,CAC5BC,OAAA,OACHC,QAAM,CACE,eAAc,mCAErBtB,KAAMuB,KAAAC,UAAAC,KAEDC,QAAUP,EAAAQ,OAChBC,QAASC,IAAAH,GACTrB,EAAqBD,EAUxB,CATG,MAGE,MAFHC,EAAAD,GAEG,IAAc0B,MAAC,kC,CAGlB,QAECpC,EAAAqC,OACH,CAED,C,OCtGAzC,SAASqB,iBAAiB,oBAAoB,KAC7CqB,GAAe","sources":["src/subscribe-form/js-subs/subscribe.js","src/subscribe-form/index-subs.js"],"sourcesContent":["function subscribeForm() {\r\n\r\n\tconst modalSubsBtn = document.querySelector('.btn-subs'), //получить button Подписаться по классу\r\n\t\tmodalSubs = document.querySelector('.modal-subs'),\r\n\t\tmodalSubsClose = document.querySelector('[data-subs=\"close\"]'),\r\n\t\tmodalSubsForm = document.querySelector('.modal-subs__form'),\r\n\t\tmodalSubsInput = document.querySelector('.modal-subs__mail');\r\n\r\n\tfunction openModalSubs() {\r\n\t\tmodalSubs.classList.add('modal-subs__show');\r\n\t\tmodalSubs.classList.remove('modal-subs__hide');\r\n\t\tdocument.body.style.overflow = 'hidden';\r\n\t}\r\n\r\n\tfunction closeModalSubs() {\r\n\t\tmodalSubs.classList.add('modal-subs__hide');\r\n\t\tmodalSubs.classList.remove('modal-subs__show');\r\n\t\tdocument.body.style.overflow = '';\r\n\t}\r\n\r\n\tfunction createModalSubsError(input) {\r\n\t\tconst modalSubsErrParag = document.createElement('p');\r\n\t\tmodalSubsErrParag.classList.add('modal-subs__error');\r\n\t\tmodalSubsErrParag.textContent = '*Неверный формат заполнения';\r\n\t\tmodalSubsForm.append(modalSubsErrParag);\r\n\r\n\t\tinput.addEventListener('input', () => {\r\n\t\t\tmodalSubsErrParag.remove();\r\n\t\t});\r\n\t}\r\n\r\n\t//модалка об отправке формы подписки\r\n\tconst message = {\r\n\t\tsuccess: 'Спасибо за подписку!',\r\n\t\tfailure: 'Что-то пошло не так...'\r\n\t};\r\n\r\n\tfunction showSuccessModalSubs(message) {\r\n\t\tconst modalSubsWrapper = document.querySelector('.modal-subs-wrapper');\r\n\r\n\t\topenModalSubs();\r\n\r\n\t\tconst successModalSubs = document.createElement('div');\r\n\t\tsuccessModalSubs.innerHTML = `\r\n\t\t\t\t<div class=\"modal-subs-content\">\r\n\t\t\t\t\t<div data-subs=\"close\" class=\"modal-subs__close\">&times;</div>\r\n\t\t\t\t\t<div class=\"modal-subs__title\">${message}</div>\r\n\t\t\t\t</div>\r\n\t\t\t`;\r\n\r\n\t\tmodalSubsWrapper.append(successModalSubs);\r\n\t\tmodalSubsWrapper.addEventListener('click', () => {\r\n\t\t\tsuccessModalSubs.remove();\r\n\t\t});\r\n\t}\r\n\r\n\tmodalSubsBtn.addEventListener('click', openModalSubs);\r\n\tmodalSubsClose.addEventListener('click', closeModalSubs);\r\n\tmodalSubs.addEventListener('click', (event) => {\r\n\t\tif (event.target === modalSubs) {\r\n\t\t\tcloseModalSubs();\r\n\t\t}\r\n\t});\r\n\r\n\t//fetch\r\n\tconst url = 'https://jsonplaceholder.typicode.com/posts';\r\n\r\n\tmodalSubsForm.addEventListener('submit', (event) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tconst modalSubsEmail = modalSubsInput.value;\r\n\r\n\t\tconst userEmail = {\r\n\t\t\temail: modalSubsEmail\r\n\t\t};\r\n\r\n\t\tasync function registerNewSubs() {\r\n\t\t\ttry {\r\n\t\t\t\tconst response = await fetch(url, {\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-type': 'application/json; charset=UTF-8',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbody: JSON.stringify(userEmail)\r\n\t\t\t\t});\r\n\t\t\t\tconst userData = await response.json();\r\n\t\t\t\tconsole.log(userData);\r\n\t\t\t\tshowSuccessModalSubs(message.success);\r\n\t\t\t} catch {\r\n\t\t\t\tshowSuccessModalSubs(message.failure);\r\n\t\t\t\tthrow new Error('Ошибка отправки формы подписки!');\r\n\t\t\t} finally {\r\n\t\t\t\tmodalSubsForm.reset();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (modalSubsInput.validity.typeMismatch || modalSubsInput.value === '') {\r\n\t\t\tcreateModalSubsError(modalSubsInput);\r\n\t\t} else {\r\n\t\t\tregisterNewSubs();\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport default subscribeForm;","import subscribeForm from './js-subs/subscribe';\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\tsubscribeForm();\r\n});"],"names":["modalSubsBtn","document","querySelector","modalSubs","modalSubsClose","modalSubsForm","modalSubsInput","openModalSubs","classList","add","remove","body","style","overflow","closeModalSubs","message","showSuccessModalSubs","modalSubsWrapper","successModalSubs","createElement","innerHTML","append","addEventListener","event","target","preventDefault","value","input","modalSubsErrParag","textContent","response","fetch","method","headers","JSON","stringify","userEmail","userData","json","console","log","Error","reset","$4446242df2c98f4c$export$2e2bcd8739ae039"],"version":3,"file":"index-subs.8c86846b.js.map"}
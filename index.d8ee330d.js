function e(e,t,r,s){Object.defineProperty(e,t,{get:r,set:s,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},n={},a=r.parcelRequire8b71;null==a&&((a=function(e){if(e in s)return s[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return s[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},r.parcelRequire8b71=a),a.register("27Lyk",(function(t,r){var s,n;e(t.exports,"register",(()=>s),(e=>s=e)),e(t.exports,"resolve",(()=>n),(e=>n=e));var a={};s=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)a[t[r]]=e[t[r]]},n=function(e){var t=a[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a("27Lyk").register(JSON.parse('{"emsLM":"index.d8ee330d.js","35sO7":"arrow_left.7195b37c.svg","8RzrX":"arrow_right.9e57fc47.svg","crOic":"fakeCard.db88a508.png"}'));var o=function(){const e=document.querySelector(".link-subscribe"),t=document.querySelector(".modal-subs"),r=document.querySelector('[data-subs="close"]'),s=document.querySelector(".modal-subs__form"),n=document.querySelector(".modal-subs__mail");function a(){t.classList.add("modal-subs__show"),t.classList.remove("modal-subs__hide"),document.body.style.overflow="hidden"}function o(){t.classList.add("modal-subs__hide"),t.classList.remove("modal-subs__show"),document.body.style.overflow=""}const l="Thank you for subscribing!",i="Something went wrong...";function d(e){const t=document.querySelector(".modal-subs-wrapper");a();const r=document.createElement("div");r.innerHTML=`\n\t\t\t\t<div class="modal-subs-content">\n\t\t\t\t\t<div data-subs="close" class="modal-subs__close">&times;</div>\n\t\t\t\t\t<div class="modal-subs__title">${e}</div>\n\t\t\t\t</div>\n\t\t\t`,t.append(r),t.addEventListener("click",(()=>{r.remove()}))}e.addEventListener("click",a),r.addEventListener("click",o),t.addEventListener("click",(e=>{e.target===t&&o()})),s.addEventListener("submit",(e=>{e.preventDefault();const t={email:n.value};n.validity.typeMismatch||""===n.value?function(e){const t=document.createElement("p");t.classList.add("modal-subs__error"),t.textContent="*Invalid filling format",s.append(t),e.addEventListener("input",(()=>{t.remove()}))}(n):async function(){try{const e=await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)});await e.json();d(l)}catch{throw d(i),new Error("Error sending the subscription form!")}finally{s.reset()}}()}))};var l=function(){const e=document.querySelectorAll(".main-slider__slide");async function t(t,r,s){try{const n=await fetch(`https://imdb-api.com/en/API/Images/k_j5w0ayif/${t}/Short`),a=await n.json(),o=a.items[r].image,l=a.items[r].title,i=document.createElement("img");i.src=o,i.alt=l,e[s].append(i)}catch(e){e.innerHtml='\n\t\t\t\t<div class="slide-error">\n\t\t\t\t\t<img src="../img/oops-err.png" alt="">\n\t\t\t\t</div>\n\t\t\t'}}t("tt0468569",12,0),t("tt0120737",36,1),t("tt4123432",4,2),t("tt1160419",1,3)};var i,d=function(){const e=document.querySelector(".main-slider"),t=document.querySelectorAll(".main-slider__slide");let r=1;function s(e){e>t.length&&(r=1),e<1&&(r=t.length),t.forEach((e=>{e.style.display="none"})),t[r-1].style.display="block",t[r-1].classList.add("fade")}s(r);const n=document.createElement("ol"),a=[];n.classList.add("slider-dots"),e.append(n);for(let e=0;e<t.length;e++){const t=document.createElement("li");t.classList.add("slider-dots__dot"),t.setAttribute("data-slide-index",e+1),0==e&&t.classList.add("slider-dots__dot--active"),n.append(t),a.push(t)}setInterval((()=>{s(r+=1),a.forEach((e=>{e.classList.remove("slider-dots__dot--active")})),a[r-1].classList.add("slider-dots__dot--active")}),4e3)};i=new URL(a("27Lyk").resolve("35sO7"),import.meta.url).toString();var c;c=new URL(a("27Lyk").resolve("8RzrX"),import.meta.url).toString();var m;m=new URL(a("27Lyk").resolve("crOic"),import.meta.url).toString();let u=function(e){let t=e.currentTarget.dataset.id;localStorage.setItem("idFilm",t)};var f=class{constructor(e){this.image=e.image,this.year=e.year,this.title=e.title,this.id=e.id}render(e){const t=new DocumentFragment,r=document.createElement("a");r.href="./film.html",r.classList.add("slider-arrow__card-link"),r.dataset.id=this.id,r.addEventListener("click",u);const s=document.createElement("div");s.classList.add("slider-arrow__card");const n=document.createElement("img");n.alt="poster",n.src=this.image,n.classList.add("slider-arrow__card-img");const a=document.createElement("div");a.classList.add("slider-arrow__card-text");const o=document.createElement("p");o.classList.add("slider-arrow__card-text__p"),o.textContent=this.year;const l=document.createElement("p");l.classList.add("slider-arrow__card-text__title"),l.textContent=this.title,t.append(r),r.append(s),s.append(n),s.append(a),a.append(l),a.append(o),e.append(t)}};let p=function(e){let t=e.currentTarget.className.match(/\d+/)[0],r=document.querySelector(".slider"+t+"__title").textContent;localStorage.setItem("title",r)};const v=document.querySelector(".modal"),h=document.querySelector(".reg"),_=document.querySelector(".open-modal"),y=document.querySelectorAll(".form_btn"),L=document.querySelector(".signin-btn"),g=document.querySelector(".signup-btn"),w=document.querySelector(".form-box"),S=document.querySelector(".reg");let b=document.querySelector(".close-modal");_.addEventListener("click",(e=>{e.preventDefault(),v.classList.add("active"),h.classList.add("active")})),b.addEventListener("click",(()=>{v.classList.remove("active"),h.classList.remove("active")})),y.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),v.classList.remove("active"),h.classList.remove("active")}))})),document.addEventListener("DOMContentLoaded",(function(e){let t=localStorage.getItem("name");null!==t&&(document.querySelector(".username").value=t)})),document.addEventListener("DOMContentLoaded",(function(e){let t=localStorage.getItem(".password");null!==t&&(document.querySelector(".password").value=t)})),document.addEventListener("click",(e=>{e.target===v&&(v.classList.remove("active"),h.classList.remove("active"))})),g.addEventListener("click",(function(){w.classList.add("active"),S.classList.add("active")})),L.addEventListener("click",(function(){w.classList.remove("active"),S.classList.remove("active")}));const E=document.querySelectorAll(".form");let q=document.querySelector(".error"),k="";function C(e,t){if(document.querySelector(e).value.length>1){let e=document.querySelector(".password").value,t=document.querySelector(".username").value;null==localStorage.getItem("name")&&localStorage.setItem("name",t),null==localStorage.getItem("password")&&localStorage.setItem("password",e)}else k+=`Fill the field ${t} <br>`}E.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),C('input[name="user"]',"Логин"),C('input[name="password"]',"Пароль"),q.innerHTML=k}))})),document.addEventListener("DOMContentLoaded",(()=>{o()})),document.addEventListener("DOMContentLoaded",(()=>{l(),d()})),document.addEventListener("DOMContentLoaded",(()=>{searchFilmsForm(),console}));const x={year:"",title:"",id:0,image:t(m)};function I(e){for(;e.firstChild;)e.removeChild(e.firstChild)}const O=document.querySelector(".main");let T={};class A{constructor(e,t,r){this.name=e,this.url=t,this.number=r,this.arr=[]}async getDataFromServer(e,t){try{let r=await fetch(t),s=await r.json();for(const e of s.items)this.arr.push(e);return localStorage.setItem(e,JSON.stringify(this.arr)),s.items}catch(e){let t=document.createElement("p");t.textContent="Sorry. API_KEY spoiled.",t.classList.add("error"),O.append(t)}}async getData(e,t){try{let r=JSON.parse(localStorage.getItem(e));return r||(r=await this.getDataFromServer(e,t)),r}catch(e){let t=document.createElement("p");t.textContent="Sorry. API_KEY spoiled.",t.classList.add("error"),O.append(t)}}render(){const e=new DocumentFragment,r=document.createElement("section");r.classList.add("section__slider");const s=document.createElement("div");s.classList.add("slider-arrow");const n=document.createElement("h3");n.classList.add("slider-arrow__title",this.number+"__title"),n.textContent=this.name;const a=document.createElement("a");a.href="all.html",a.classList.add("slider-arrow__link","linkall-"+this.number),a.textContent="View all",a.addEventListener("click",p);const o=document.createElement("div");o.classList.add("slider-arrow__block");const l=document.createElement("a");l.href="",l.id=this.number+"-arrow_left",l.classList.add("slider-arrow__left","invisible"),l.addEventListener("click",this.clickArrow);const d=document.createElement("img");d.alt="arrow left",d.src=t(i),d.classList.add("slider-arrow__img");const m=document.createElement("div");m.classList.add("slider-arrow__films",this.number);const u=document.createElement("a");u.href="",u.id=this.number+"-arrow_right",u.classList.add("slider-arrow__right"),u.addEventListener("click",this.clickArrow);const f=document.createElement("img");f.alt="arrow right",f.src=t(c),f.classList.add("slider-arrow__img"),e.append(r),r.append(s),s.append(n),s.append(a),r.append(o),o.append(l),l.append(d),o.append(m),o.append(u),u.append(f),O.append(e)}async renderCards(){try{let e=await this.getData(this.name,this.url),t=[];for(let r=0;r<e.length;r++){const s=e[r];t[r]=new f(s)}T[this.name]=t;const r=document.querySelector("."+this.number);for(let e=0;e<5;e++){t[e].render(r)}}catch(e){console.log(e)}}clickArrow(e){e.preventDefault();let t,r=e.currentTarget,s=0,n=r.id,a=n.match(/\d+/)[0];if(s=document.querySelector(".slider"+a+"__title").textContent,n.match("right")){if(R=r,R.className.match("invisible"))return;if(T["slider"+a]++,H=document.querySelector("#slider"+a+"-arrow_left"),H.classList.remove("invisible"),I(document.querySelector(".slider"+a)),t=T[s],1===T["slider"+a])for(let e=4;e<9;e++){t[e].render(document.querySelector(".slider"+a))}if(2===T["slider"+a])for(let e=8;e<13;e++){t[e].render(document.querySelector(".slider"+a))}if(3===T["slider"+a]){for(let e=12;e<16;e++){t[e].render(document.querySelector(".slider"+a))}new f(x).render(document.querySelector(".slider"+a));let e=document.querySelector('a[data-id="0"]');e.removeEventListener("click",u),e.href="all.html",e.classList.add("linkall-"+a),e.addEventListener("click",p),R.classList.add("invisible")}}if(n.match("left")){if(H=r,H.className.match("invisible"))return;if(T["slider"+a]--,R=document.querySelector("#slider"+a+"-arrow_right"),R.classList.remove("invisible"),I(document.querySelector(".slider"+a)),t=T[s],2===T["slider"+a])for(let e=8;e<13;e++){t[e].render(document.querySelector(".slider"+a))}if(1===T["slider"+a])for(let e=4;e<9;e++){t[e].render(document.querySelector(".slider"+a))}if(0===T["slider"+a]){for(let e=0;e<5;e++){t[e].render(document.querySelector(".slider"+a))}H.classList.add("invisible")}}}}let D=new A("Top 250 Movies","https://imdb-api.com/en/API/Top250Movies/k_4wflfh9z","slider1");D.render(),D.renderCards(),T.slider1=0;let F=new A("Top 250TVs","https://imdb-api.com/en/API/Top250TVs/k_4wflfh9z","slider2");F.render(),F.renderCards(),T.slider2=0;let M=new A("In Theaters","https://imdb-api.com/en/API/InTheaters/k_4wflfh9z","slider3");M.render(),M.renderCards(),T.slider3=0;let H=document.querySelector(".slider-arrow__left"),R=document.querySelector(".slider-arrow__right");
//# sourceMappingURL=index.d8ee330d.js.map

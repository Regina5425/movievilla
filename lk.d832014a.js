function e(e,t,r,a){Object.defineProperty(e,t,{get:r,set:a,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},i=r.parcelRequire8b71;null==i&&((i=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return a[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},r.parcelRequire8b71=i),i.register("27Lyk",(function(t,r){var a,n;e(t.exports,"register",(()=>a),(e=>a=e)),e(t.exports,"resolve",(()=>n),(e=>n=e));var i={};a=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)i[t[r]]=e[t[r]]},n=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("27Lyk").register(JSON.parse('{"iaMlc":"lk.d832014a.js","gzf2X":"heart_grey.45000755.svg","6Gahv":"heart_red.d54e7003.svg","dobYE":"oops-err.5cfb3e47.png"}'));let s=function(e){let t=e.currentTarget.dataset.id;localStorage.setItem("idFilm",t)};var l=class{constructor(e){this.image=e.image,this.year=e.year,this.title=e.title,this.id=e.id}render(e){const t=new DocumentFragment,r=document.createElement("a");r.href="./film.html",r.classList.add("slider-arrow__card-link"),r.dataset.id=this.id,r.addEventListener("click",s);const a=document.createElement("div");a.classList.add("slider-arrow__card");const n=document.createElement("img");n.alt="poster",n.src=this.image,n.classList.add("slider-arrow__card-img");const i=document.createElement("div");i.classList.add("slider-arrow__card-text");const l=document.createElement("p");l.classList.add("slider-arrow__card-text__p"),l.textContent=this.year;const o=document.createElement("p");o.classList.add("slider-arrow__card-text__title"),o.textContent=this.title,t.append(r),r.append(a),a.append(n),a.append(i),i.append(o),i.append(l),e.append(t)}};function o(e,t){let r=JSON.parse(localStorage.getItem(e));return r||(r={[t]:[]}),r}var d;d=new URL(i("27Lyk").resolve("gzf2X"),import.meta.url).toString();var c;c=new URL(i("27Lyk").resolve("6Gahv"),import.meta.url).toString();var m,p=class{constructor(e){this.id=e}render(e){let r=document.createElement("div");r.classList.add("heart-circle"),r.dataset.id=this.id;let a=document.createElement("img");a.alt="heart",a.classList.add("heart");let n=0,i=o("favorites","films"),s=i.films;s.length>0&&s.includes(this.id)?(a.src=t(c),n++):a.src=t(d),r.addEventListener("click",(function(e){let r=e.currentTarget.dataset.id;var s,l,o;n?(a.src=t(d),n--,i.films.splice(i.films.indexOf(r),1)):(a.src=t(c),n++,i.films.push(r)),s=i,l="favorites",o="films",localStorage.removeItem(l),localStorage.setItem(l,JSON.stringify({[o]:s[o]}))})),r.append(a),e.append(r)}};m=new URL(i("27Lyk").resolve("dobYE"),import.meta.url).toString();const u=document.querySelector(".favorites-block");let f=o("favorites","films").films;if(f.length>0){let e=[];(async r=>{try{for(let t=0;t<r.length;t++){const a=await g(r[t]);if(!a.id)throw new Error("Sorry. API_KEY spoiled.");e[t]=new l(a),e[t].render(u);let n=new p(a.id),i=document.querySelectorAll(".slider-arrow__card");n.render(i[t])}}catch(e){let r=document.createElement("img");r.classList.add("error"),r.alt="error page",r.src=t(m),u.append(r);let a=document.createElement("p");a.textContent="Sorry. API_KEY spoiled.",a.classList.add("error"),u.append(a)}})(f)}else{let e=document.createElement("div");e.classList.add("error"),e.textContent="Избранных фильмов нет :( ",u.append(e)}async function g(e){try{let t="https://imdb-api.com/en/API/Title/k_4wflfh9z/"+e+"/FullActor,FullCast,Posters,Images,Trailer,Ratings,Wikipedia,",r=await fetch(t);return await r.json()}catch(e){let t=document.createElement("p");t.textContent="Sorry. Server is not avaliable.",t.classList.add("error"),u.append(t)}}
//# sourceMappingURL=lk.d832014a.js.map

{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-2c5da1262544bdf0.js","src/project/assets/js/card.js","src/project/assets/js/workwithdata.js","node_modules/@parcel/runtime-js/lib/runtime-71fdcb32557db864.js","node_modules/@parcel/runtime-js/lib/runtime-b2a321e785291654.js","src/project/assets/js/favorite.js","node_modules/@parcel/runtime-js/lib/runtime-bb30bd599e78b747.js","src/project/assets/js/lk.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"iaMlc\\\":\\\"lk.d832014a.js\\\",\\\"gzf2X\\\":\\\"heart_grey.45000755.svg\\\",\\\"6Gahv\\\":\\\"heart_red.d54e7003.svg\\\",\\\"dobYE\\\":\\\"oops-err.5cfb3e47.png\\\"}\"));","export let clickFilm = function (e) {\r\n  let active = e.currentTarget;\r\n  let id = active.dataset.id;\r\n  localStorage.setItem(\"idFilm\", id);\r\n};\r\n\r\nclass Card {\r\n  constructor(obj) {\r\n    this.image = obj.image;\r\n    this.year = obj.year;\r\n    this.title = obj.title;\r\n    this.id = obj.id;\r\n  }\r\n\r\n  render(node) {\r\n    const fragment = new DocumentFragment();\r\n\r\n    const link = document.createElement(\"a\");\r\n    link.href = \"./film.html\";\r\n    link.classList.add(\"slider-arrow__card-link\");\r\n    link.dataset.id = this.id;\r\n    link.addEventListener(\"click\", clickFilm);\r\n\r\n    const card = document.createElement(\"div\");\r\n    card.classList.add(\"slider-arrow__card\");\r\n\r\n    const img = document.createElement(\"img\");\r\n    img.alt = \"poster\";\r\n    img.src = this.image;\r\n    img.classList.add(\"slider-arrow__card-img\");\r\n\r\n    const text = document.createElement(\"div\");\r\n    text.classList.add(\"slider-arrow__card-text\");\r\n\r\n    const time = document.createElement(\"p\");\r\n    time.classList.add(\"slider-arrow__card-text__p\");\r\n    time.textContent = this.year;\r\n\r\n    const titleElem = document.createElement(\"p\");\r\n    titleElem.classList.add(\"slider-arrow__card-text__title\");\r\n    titleElem.textContent = this.title;\r\n\r\n    fragment.append(link);\r\n    link.append(card);\r\n    card.append(img);\r\n    card.append(text);\r\n    text.append(titleElem);\r\n    text.append(time);\r\n\r\n    node.append(fragment);\r\n  }\r\n}\r\n\r\nexport default Card;","export function getDataFromLocal(str, param) {\r\n  let data = JSON.parse(localStorage.getItem(str));\r\n  if (!data) {\r\n    data = {\r\n      [param]: [],\r\n    };\r\n  }\r\n  return data;\r\n}\r\n\r\nexport function setDataToLocal(data, str, param) {\r\n  localStorage.removeItem(str);\r\n  localStorage.setItem(str, JSON.stringify({ [param]: data[param] }));\r\n}\r\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"gzf2X\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"6Gahv\")).toString();","import heartGrey from \"../img/heart_grey.svg\";\r\nimport heartRed from \"../img/heart_red.svg\";\r\n\r\nimport { getDataFromLocal } from \"./workwithdata\";\r\nimport { setDataToLocal } from \"./workwithdata\";\r\n\r\nclass Favorite {\r\n  constructor(id) {\r\n    this.id = id;\r\n  }\r\n\r\n  render(node) {\r\n    let base = document.createElement(\"div\");\r\n    base.classList.add(\"heart-circle\");\r\n    base.dataset.id = this.id;\r\n\r\n    let favorite = document.createElement(\"img\");\r\n    favorite.alt = `heart`;\r\n    favorite.classList.add(\"heart\");\r\n    let toogle = 0;\r\n    let favoritesFilm = getDataFromLocal(\"favorites\", \"films\");\r\n    let arrFavorites = favoritesFilm.films;\r\n    if (arrFavorites.length > 0) {\r\n      if (arrFavorites.includes(this.id)) {\r\n        favorite.src = heartRed;\r\n        toogle++;\r\n      } else {\r\n        favorite.src = heartGrey;\r\n      }\r\n    } else {\r\n      favorite.src = heartGrey;\r\n    }\r\n\r\n    base.addEventListener(\"click\", function (e) {\r\n      let active = e.currentTarget;\r\n      let id = active.dataset.id;\r\n\r\n      if (!toogle) {\r\n        favorite.src = heartRed;\r\n        toogle++;\r\n        favoritesFilm.films.push(id);\r\n      } else {\r\n        favorite.src = heartGrey;\r\n        toogle--;\r\n        favoritesFilm.films.splice(favoritesFilm.films.indexOf(id), 1);\r\n      }\r\n\r\n      setDataToLocal(favoritesFilm, \"favorites\", \"films\");\r\n    });\r\n\r\n    base.append(favorite);\r\n    node.append(base);\r\n  }\r\n}\r\n\r\nexport default Favorite;\r\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"dobYE\")).toString();","import Card from \"./card.js\";\r\nimport { getDataFromLocal } from \"./workwithdata\";\r\nimport Favorite from \"./favorite\";\r\nimport imgError from \"../img/oops-err.png\";\r\n\r\nconst blockFavorites = document.querySelector(\".favorites-block\");\r\n\r\nlet favorites = getDataFromLocal(\"favorites\", \"films\");\r\nlet arrayFavorites = favorites.films;\r\n\r\nif (arrayFavorites.length > 0) {\r\n  let arrCard = [];\r\n\r\n  (async (arrayFavorites) => {\r\n    try {\r\n      for (let i = 0; i < arrayFavorites.length; i++) {\r\n        const result = await getData(arrayFavorites[i]);\r\n        if (!result.id) {\r\n          throw new Error(\"Sorry. API_KEY spoiled.\");\r\n        }\r\n        arrCard[i] = new Card(result);\r\n        arrCard[i].render(blockFavorites);\r\n        let icon = new Favorite(result.id);\r\n        let arrIcon = document.querySelectorAll(\".slider-arrow__card\");\r\n        icon.render(arrIcon[i]);\r\n      }\r\n    } catch (error) {\r\n      let errorImg = document.createElement(\"img\");\r\n      errorImg.classList.add(\"error\");\r\n      errorImg.alt = \"error page\";\r\n      errorImg.src = imgError;\r\n      blockFavorites.append(errorImg);\r\n\r\n      let errorMsg = document.createElement(\"p\");\r\n      errorMsg.textContent = \"Sorry. API_KEY spoiled.\";\r\n      errorMsg.classList.add(\"error\");\r\n      blockFavorites.append(errorMsg);\r\n    }\r\n  })(arrayFavorites);\r\n} else {\r\n  let divError = document.createElement(\"div\");\r\n  divError.classList.add(\"error\");\r\n  divError.textContent = `Избранных фильмов нет :( `;\r\n  blockFavorites.append(divError);\r\n}\r\n\r\nasync function getData(id) {\r\n  try {\r\n    let url =\r\n      \"https://imdb-api.com/en/API/Title/k_4wflfh9z/\" +\r\n      id +\r\n      \"/FullActor,FullCast,Posters,Images,Trailer,Ratings,Wikipedia,\";\r\n    let response = await fetch(url);\r\n    let data = await response.json();\r\n    return data;\r\n  } catch (error) {\r\n    let errorMsg = document.createElement(\"p\");\r\n    errorMsg.textContent = \"Sorry. Server is not avaliable.\";\r\n    errorMsg.classList.add(\"error\");\r\n    blockFavorites.append(errorMsg);\r\n  }\r\n}\r\n"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$cb86c2b9c66c0d14$export$be5da15dbcd87f53","e","currentTarget","dataset","localStorage","setItem","$cb86c2b9c66c0d14$export$2e2bcd8739ae039","constructor","obj","this","image","year","title","render","node","fragment","DocumentFragment","link","document","createElement","href","classList","add","addEventListener","card","img","alt","src","text","time","textContent","titleElem","append","$3880923b0d46e643$export$5a2e8b942d496a5f","str","param","data","getItem","$fa46ec9288f78be9$exports","URL","resolve","import","meta","url","toString","$fcb8832b1d18d25b$exports","$5b543cd49de95acc$export$2e2bcd8739ae039","base","favorite","toogle","favoritesFilm","arrFavorites","films","includes","$parcel$interopDefault","splice","indexOf","push","removeItem","stringify","$fcda224e16bef463$exports","$6383a96e3079b386$var$blockFavorites","querySelector","$6383a96e3079b386$var$arrayFavorites","arrCard","arrayFavorites","result","$6383a96e3079b386$var$getData","icon","arrIcon","querySelectorAll","error","errorImg","errorMsg","divError","async","response","fetch","json"],"version":3,"file":"lk.d832014a.js.map"}